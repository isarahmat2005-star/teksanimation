<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>MBG PRO - Motion Generator</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700;800&family=Orbitron:wght@900&display=swap" rel="stylesheet">
    <style>
        /* --- 1. CSS VISUAL (SAMA SEPERTI YANG ANDA SUKA) --- */
        :root {
            --bg-dark: #020608;
            --cyan: #00f3ff;
            --green: #39ff14;
            --purple: #bc13fe;
            --text-dim: #4a6a7c;
            --border: #142832;
        }

        body {
            margin: 0;
            background-color: var(--bg-dark);
            color: #bce7ff;
            font-family: 'JetBrains Mono', monospace;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* UTILS */
        .hidden { display: none; }
        button { cursor: pointer; transition: 0.2s; }
        button:active { transform: scale(0.98); }

        /* HEADER */
        header {
            border-bottom: 1px solid var(--border);
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            background: rgba(5, 10, 14, 0.95);
            z-index: 10;
        }
        .brand { color: var(--cyan); font-weight: 800; border-left: 4px solid var(--cyan); padding-left: 10px; }

        /* MAIN LAYOUT */
        .main-container { display: flex; flex: 1; height: 100%; }

        /* SIDEBAR */
        .sidebar {
            width: 300px;
            background: #050a0e;
            border-right: 1px solid var(--border);
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            z-index: 5;
        }
        .control-group label { display: block; color: var(--text-dim); font-size: 10px; margin-bottom: 5px; letter-spacing: 1px; }
        .cyber-input, .cyber-select {
            width: 100%; background: #000; border: 1px solid var(--border);
            color: var(--cyan); padding: 10px; font-family: inherit; outline: none;
        }
        .cyber-input:focus { border-color: var(--cyan); box-shadow: 0 0 10px rgba(0,243,255,0.2); }

        /* WORKSPACE */
        .workspace {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 20px;
            background: radial-gradient(circle at center, #0a151a 0%, #000 100%);
            position: relative;
        }

        /* PREVIEW AREA (CANVAS) */
        .preview-wrapper {
            flex: 1;
            position: relative;
            border: 1px solid var(--border);
            background: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            /* Cyberpunk corners */
            clip-path: polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%);
        }

        canvas {
            max-width: 100%;
            max-height: 100%;
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
        }

        /* OVERLAYS */
        .rec-indicator {
            position: absolute; top: 20px; right: 20px;
            color: #ff0055; font-weight: bold; font-size: 12px;
            display: flex; align-items: center; gap: 5px;
            opacity: 0; transition: opacity 0.3s;
        }
        .rec-dot { width: 10px; height: 10px; background: #ff0055; border-radius: 50%; }
        .blinking { animation: blink 1s infinite; }
        @keyframes blink { 50% { opacity: 0; } }

        /* BOTTOM PANEL */
        .bottom-panel {
            height: 160px;
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }
        
        .btn-generate {
            width: 300px;
            background: var(--cyan);
            color: #000;
            font-weight: 900;
            font-size: 18px;
            border: none;
            clip-path: polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px);
        }
        .btn-generate:hover { box-shadow: 0 0 30px var(--cyan); letter-spacing: 2px; }
        .btn-generate:disabled { background: #333; color: #777; cursor: not-allowed; box-shadow: none; letter-spacing: normal;}

        .telemetry {
            flex: 1;
            background: rgba(0,0,0,0.8);
            border: 1px solid var(--border);
            padding: 10px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            color: var(--green);
            overflow-y: auto;
            display: flex;
            flex-direction: column-reverse; /* Log baru di bawah */
        }
        .log-line { margin-bottom: 2px; opacity: 0.8; }
        .log-line::before { content: "> "; color: #555; }

    </style>
</head>
<body>

    <header>
        <div class="brand">MBG STUDIO <span style="font-size:10px; color:white; font-weight:normal;">// PRO VER</span></div>
        <div style="font-size:10px; color:#555;">SYSTEM_READY</div>
    </header>

    <div class="main-container">
        <aside class="sidebar">
            <div class="control-group">
                <label>⊞ COLOR THEME</label>
                <select id="inputTheme" class="cyber-select" onchange="updateSettings()">
                    <option value="cyan">Cyber Cyan (Default)</option>
                    <option value="green">Hacker Green</option>
                    <option value="purple">Neon Purple</option>
                </select>
            </div>

            <div class="control-group">
                <label>T LINE 1 TEXT</label>
                <input type="text" id="inputText1" class="cyber-input" value="HIDUP" oninput="updateSettings()">
            </div>

            <div class="control-group">
                <label>T LINE 2 TEXT</label>
                <input type="text" id="inputText2" class="cyber-input" value="JOKOWI" oninput="updateSettings()">
            </div>

            <div class="control-group">
                <label>⚡ PARTICLES</label>
                <select id="inputParticles" class="cyber-select" onchange="updateSettings()">
                    <option value="on">On (Active)</option>
                    <option value="off">Off (Clean)</option>
                </select>
            </div>
            
            <div style="margin-top:auto; font-size:10px; color:#555;">
                RENDER ENGINE: CANVAS 2D<br>FPS TARGET: 60
            </div>
        </aside>

        <main class="workspace">
            <div class="preview-wrapper">
                <div id="recStatus" class="rec-indicator blinking"><div class="rec-dot"></div> RECORDING...</div>
                <canvas id="mainCanvas"></canvas>
            </div>

            <div class="bottom-panel">
                <button id="btnRecord" class="btn-generate" onclick="startExport()">
                    ↓ GENERATE VIDEO
                </button>
                <div class="telemetry" id="logConsole">
                    <div class="log-line">System initialized. Waiting for input...</div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // --- 1. SETUP CANVAS ---
        const canvas = document.getElementById('mainCanvas');
        const ctx = canvas.getContext('2d');
        
        // Set Resolusi Internal (Full HD)
        canvas.width = 1920;
        canvas.height = 1080;

        // State / Variabel Global
        let state = {
            text1: "HIDUP",
            text2: "JOKOWI",
            theme: "cyan", // cyan, green, purple
            particlesEnabled: true,
            primaryColor: "#00f3ff"
        };

        // Objek Partikel
        let particles = [];
        let animationId;
        let isRecording = false;

        // --- 2. FUNGSI LOGGING (TELEMETRY) ---
        function log(msg) {
            const consoleDiv = document.getElementById('logConsole');
            const time = new Date().toLocaleTimeString();
            const div = document.createElement('div');
            div.className = 'log-line';
            div.innerText = `[${time}] ${msg}`;
            consoleDiv.prepend(div); // Tambah ke atas
        }

        // --- 3. LOGIKA UPDATE DARI INPUT ---
        function updateSettings() {
            state.text1 = document.getElementById('inputText1').value.toUpperCase();
            state.text2 = document.getElementById('inputText2').value.toUpperCase();
            state.theme = document.getElementById('inputTheme').value;
            state.particlesEnabled = document.getElementById('inputParticles').value === 'on';

            // Set Warna Berdasarkan Tema
            if(state.theme === 'cyan') state.primaryColor = "#00f3ff";
            if(state.theme === 'green') state.primaryColor = "#39ff14";
            if(state.theme === 'purple') state.primaryColor = "#bc13fe";
        }

        // --- 4. ENGINE PARTIKEL ---
        function initParticles() {
            particles = [];
            for(let i=0; i<60; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    size: Math.random() * 3,
                    speed: Math.random() * 2 + 0.5,
                    alpha: Math.random()
                });
            }
        }

        // --- 5. FUNGSI GAMBAR (RENDER LOOP) ---
        function draw(time) {
            // A. Background Gelap
            ctx.fillStyle = "#050a0e";
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Grid Background (Efek Tech)
            ctx.strokeStyle = "rgba(255,255,255,0.03)";
            ctx.lineWidth = 2;
            for(let i=0; i<canvas.width; i+=100) {
                ctx.beginPath(); ctx.moveTo(i,0); ctx.lineTo(i, canvas.height); ctx.stroke();
            }

            // B. Gambar Partikel
            if (state.particlesEnabled) {
                ctx.fillStyle = state.primaryColor;
                particles.forEach(p => {
                    p.y -= p.speed; // Gerak ke atas
                    if(p.y < 0) p.y = canvas.height; // Reset
                    
                    ctx.globalAlpha = p.alpha * 0.5;
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.size, 0, Math.PI*2);
                    ctx.fill();
                });
                ctx.globalAlpha = 1.0;
            }

            // C. Setup Teks
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            
            // Efek Glitch (Getar sedikit secara random)
            let offsetX = Math.random() > 0.95 ? (Math.random()*4 - 2) : 0;
            
            // Teks 1 (Besar)
            ctx.textAlign = "center";
            ctx.font = "900 180px 'Orbitron', sans-serif"; // Font Sci-Fi
            
            // Shadow / Glow
            ctx.shadowColor = state.primaryColor;
            ctx.shadowBlur = 30;
            ctx.fillStyle = state.primaryColor;
            ctx.fillText(state.text1, centerX + offsetX, centerY - 20);
            
            // Teks 2 (Putih)
            ctx.shadowBlur = 0; // Reset shadow untuk teks bawah
            ctx.font = "700 120px 'JetBrains Mono', monospace";
            ctx.fillStyle = "white";
            ctx.fillText(state.text2, centerX - offsetX, centerY + 120);

            // Garis Aksen Bawah
            ctx.fillStyle = state.primaryColor;
            ctx.shadowBlur = 10;
            ctx.fillRect(centerX - 100, centerY + 160, 200, 10);
            ctx.shadowBlur = 0;

            // Overlay Scanline (Garis TV)
            ctx.fillStyle = "rgba(0,0,0,0.2)";
            for(let y=0; y<canvas.height; y+=4) {
                ctx.fillRect(0, y, canvas.width, 2);
            }

            // Loop
            animationId = requestAnimationFrame(draw);
        }

        // --- 6. FUNGSI EXPORT VIDEO (RECORDING) ---
        function startExport() {
            const btn = document.getElementById('btnRecord');
            const indicator = document.getElementById('recStatus');

            // UI Feedback
            btn.disabled = true;
            btn.innerText = "PROSESSING...";
            indicator.style.opacity = 1;
            log("Initializing render sequence...");

            // Setup Recorder
            const stream = canvas.captureStream(60);
            const recorder = new MediaRecorder(stream, { mimeType: 'video/webm; codecs=vp9' });
            const chunks = [];

            recorder.ondataavailable = e => chunks.push(e.data);
            
            recorder.onstop = () => {
                // Selesai Rekam
                const blob = new Blob(chunks, { type: 'video/webm' });
                const url = URL.createObjectURL(blob);
                
                // Auto Download
                const a = document.createElement('a');
                a.href = url;
                a.download = `MBG_PROJECT_${Date.now()}.webm`;
                a.click();
                
                // Reset UI
                btn.disabled = false;
                btn.innerText = "↓ GENERATE VIDEO";
                indicator.style.opacity = 0;
                log("Render complete. File downloaded.");
                log("System ready.");
            };

            // Mulai Rekam
            recorder.start();
            log("Recording frame buffer...");

            // Stop otomatis setelah 5 detik
            setTimeout(() => {
                log("Finalizing encoding...");
                recorder.stop();
            }, 5000);
        }

        // --- JALANKAN PERTAMA KALI ---
        initParticles();
        draw();
        log("Application loaded successfully.");

    </script>
</body>
</html>
